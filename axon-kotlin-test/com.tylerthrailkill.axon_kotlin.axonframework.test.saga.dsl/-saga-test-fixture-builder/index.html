<HTML>
<HEAD>
<meta charset="UTF-8">
<title>SagaTestFixtureBuilder - axon-kotlin-test</title>
<link rel="stylesheet" href="../../../style.css">
</HEAD>
<BODY>
<a href="../../index.html">axon-kotlin-test</a>&nbsp;/&nbsp;<a href="../index.html">com.tylerthrailkill.axon_kotlin.axonframework.test.saga.dsl</a>&nbsp;/&nbsp;<a href="./index.html">SagaTestFixtureBuilder</a><br/>
<br/>
<h1>SagaTestFixtureBuilder</h1>
<code><span class="keyword">class </span><span class="identifier">SagaTestFixtureBuilder</span></code><pre><code>FixtureExecutionResult validator = fixture
  .givenAggregate(aggregate1).published(
      GenericEventMessage.asEventMessage(new TriggerSagaStartEvent(aggregate1)), new TriggerExistingSagaEvent(aggregate1))
  .andThenAggregate(aggregate2).published(new TriggerSagaStartEvent(aggregate2))
  .whenAggregate(aggregate1).publishes(new TriggerSagaEndEvent(aggregate1))

  validator.expectActiveSagas(1)
  validator.expectAssociationWith("identifier", aggregate2)
  validator.expectNoAssociationWith("identifier", aggregate1)
  validator.expectScheduledEventOfType(Duration.ofMinutes(10), TimerTriggeredEvent::class.java)
  validator.expectScheduledEventMatching(Duration.ofMinutes(10), messageWithPayload(CoreMatchers.any(TimerTriggeredEvent::class.java)))
  validator.expectScheduledEvent(Duration.ofMinutes(10), TimerTriggeredEvent(aggregate1))
  validator.expectScheduledEventOfType(fixture.currentTime().plusSeconds(600), TimerTriggeredEvent::class.java)
  validator.expectScheduledEventMatching(fixture.currentTime().plusSeconds(600), messageWithPayload(CoreMatchers.any(TimerTriggeredEvent::class.java)))
  validator.expectScheduledEvent(fixture.currentTime().plusSeconds(600), TimerTriggeredEvent(aggregate1))
  validator.expectDispatchedCommands()
  validator.expectNoDispatchedCommands()
  validator.expectPublishedEventsMatching(noEvents())
</code></pre>
<p>translates to</p>
<pre><code>fixture {
  given {
    aggregate1 published GenericEventMessage.asEventMessage(TriggerSagaStartEvent(aggregate1)), TriggerExistingSagaEvent(aggregate1))
    aggregate2 published TriggerSagaStartEvent(aggregate2)
  }
  whenever {
    aggregate1 publishes TriggerSagaEndEvent(aggregate1)
  }
  expect {
    activeSagas(1)
    "identifier" associatedWith aggregate2
    "identifier" notAssociatedWith aggregate1
    scheduledEvent(Duration.ofMinutes(10)).ofType&lt;TimerTriggeredEvent()
    scheduledEvent(Duration.ofMinutes(10).matching(messageWithPayload(any&lt;TimerTriggeredEvent&gt;()))
    scheduledEvent(Duration.ofMinutes(10).of(TimerTriggeredEvent(aggregate1))
    dispatchedCommands {}
    noDispatchedCommands()
    publishedEventsMatching = noEvents()
  }
</code></pre>
<h3>Types</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="-any-unary-builder/index.html">AnyUnaryBuilder</a></p>
</td>
<td>
<code><span class="keyword">class </span><span class="identifier">AnyUnaryBuilder</span></code></td>
</tr>
<tr>
<td>
<p><a href="-expects-builder/index.html">ExpectsBuilder</a></p>
</td>
<td>
<code><span class="keyword">inner</span> <span class="keyword">class </span><span class="identifier">ExpectsBuilder</span></code></td>
</tr>
<tr>
<td>
<p><a href="-given-builder/index.html">GivenBuilder</a></p>
</td>
<td>
<code><span class="keyword">inner</span> <span class="keyword">class </span><span class="identifier">GivenBuilder</span></code></td>
</tr>
<tr>
<td>
<p><a href="-register-builder/index.html">RegisterBuilder</a></p>
</td>
<td>
<code><span class="keyword">inner</span> <span class="keyword">class </span><span class="identifier">RegisterBuilder</span></code></td>
</tr>
<tr>
<td>
<p><a href="-whenever-builder/index.html">WheneverBuilder</a></p>
</td>
<td>
<code><span class="keyword">inner</span> <span class="keyword">class </span><span class="identifier">WheneverBuilder</span></code></td>
</tr>
</tbody>
</table>
<h3>Constructors</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="-init-.html">&lt;init&gt;</a></p>
</td>
<td>
<code><span class="identifier">SagaTestFixtureBuilder</span><span class="symbol">(</span><span class="identifier" id="com.tylerthrailkill.axon_kotlin.axonframework.test.saga.dsl.SagaTestFixtureBuilder$<init>(org.axonframework.test.saga.FixtureConfiguration)/sagaTestFixture">sagaTestFixture</span><span class="symbol">:</span>&nbsp;<span class="identifier">FixtureConfiguration</span><span class="symbol">)</span></code><pre><code>FixtureExecutionResult validator = fixture
  .givenAggregate(aggregate1).published(
      GenericEventMessage.asEventMessage(new TriggerSagaStartEvent(aggregate1)), new TriggerExistingSagaEvent(aggregate1))
  .andThenAggregate(aggregate2).published(new TriggerSagaStartEvent(aggregate2))
  .whenAggregate(aggregate1).publishes(new TriggerSagaEndEvent(aggregate1))

  validator.expectActiveSagas(1)
  validator.expectAssociationWith("identifier", aggregate2)
  validator.expectNoAssociationWith("identifier", aggregate1)
  validator.expectScheduledEventOfType(Duration.ofMinutes(10), TimerTriggeredEvent::class.java)
  validator.expectScheduledEventMatching(Duration.ofMinutes(10), messageWithPayload(CoreMatchers.any(TimerTriggeredEvent::class.java)))
  validator.expectScheduledEvent(Duration.ofMinutes(10), TimerTriggeredEvent(aggregate1))
  validator.expectScheduledEventOfType(fixture.currentTime().plusSeconds(600), TimerTriggeredEvent::class.java)
  validator.expectScheduledEventMatching(fixture.currentTime().plusSeconds(600), messageWithPayload(CoreMatchers.any(TimerTriggeredEvent::class.java)))
  validator.expectScheduledEvent(fixture.currentTime().plusSeconds(600), TimerTriggeredEvent(aggregate1))
  validator.expectDispatchedCommands()
  validator.expectNoDispatchedCommands()
  validator.expectPublishedEventsMatching(noEvents())
</code></pre></td>
</tr>
</tbody>
</table>
<h3>Properties</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="continued-given-state.html">continuedGivenState</a></p>
</td>
<td>
<code><span class="keyword">lateinit</span> <span class="keyword">var </span><span class="identifier">continuedGivenState</span><span class="symbol">: </span><span class="identifier">WhenState</span></code></td>
</tr>
<tr>
<td>
<p><a href="fixture-execution-result.html">fixtureExecutionResult</a></p>
</td>
<td>
<code><span class="keyword">lateinit</span> <span class="keyword">var </span><span class="identifier">fixtureExecutionResult</span><span class="symbol">: </span><span class="identifier">FixtureExecutionResult</span></code></td>
</tr>
<tr>
<td>
<p><a href="saga-test-fixture.html">sagaTestFixture</a></p>
</td>
<td>
<code><span class="keyword">val </span><span class="identifier">sagaTestFixture</span><span class="symbol">: </span><span class="identifier">FixtureConfiguration</span></code></td>
</tr>
</tbody>
</table>
<h3>Functions</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="callback-behavior.html">callbackBehavior</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">callbackBehavior</span><span class="symbol">(</span><span class="identifier" id="com.tylerthrailkill.axon_kotlin.axonframework.test.saga.dsl.SagaTestFixtureBuilder$callbackBehavior(org.axonframework.test.utils.CallbackBehavior)/callbackBehavior">callbackBehavior</span><span class="symbol">:</span>&nbsp;<span class="identifier">CallbackBehavior</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code></td>
</tr>
<tr>
<td>
<p><a href="expect.html">expect</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">expect</span><span class="symbol">(</span><span class="identifier" id="com.tylerthrailkill.axon_kotlin.axonframework.test.saga.dsl.SagaTestFixtureBuilder$expect(kotlin.Function1((com.tylerthrailkill.axon_kotlin.axonframework.test.saga.dsl.SagaTestFixtureBuilder.ExpectsBuilder, kotlin.Unit)))/block">block</span><span class="symbol">:</span>&nbsp;<a href="-expects-builder/index.html"><span class="identifier">ExpectsBuilder</span></a><span class="symbol">.</span><span class="symbol">(</span><span class="symbol">)</span>&nbsp;<span class="symbol">-&gt;</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code></td>
</tr>
<tr>
<td>
<p><a href="given.html">given</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">given</span><span class="symbol">(</span><span class="identifier" id="com.tylerthrailkill.axon_kotlin.axonframework.test.saga.dsl.SagaTestFixtureBuilder$given(kotlin.Function1((com.tylerthrailkill.axon_kotlin.axonframework.test.saga.dsl.SagaTestFixtureBuilder.GivenBuilder, kotlin.Unit)))/block">block</span><span class="symbol">:</span>&nbsp;<a href="-given-builder/index.html"><span class="identifier">GivenBuilder</span></a><span class="symbol">.</span><span class="symbol">(</span><span class="symbol">)</span>&nbsp;<span class="symbol">-&gt;</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">WhenState</span></code></td>
</tr>
<tr>
<td>
<p><a href="register.html">register</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">register</span><span class="symbol">(</span><span class="identifier" id="com.tylerthrailkill.axon_kotlin.axonframework.test.saga.dsl.SagaTestFixtureBuilder$register(kotlin.Function1((com.tylerthrailkill.axon_kotlin.axonframework.test.saga.dsl.SagaTestFixtureBuilder.RegisterBuilder, kotlin.Unit)))/block">block</span><span class="symbol">:</span>&nbsp;<a href="-register-builder/index.html"><span class="identifier">RegisterBuilder</span></a><span class="symbol">.</span><span class="symbol">(</span><span class="symbol">)</span>&nbsp;<span class="symbol">-&gt;</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="-register-builder/index.html"><span class="identifier">RegisterBuilder</span></a></code></td>
</tr>
<tr>
<td>
<p><a href="whenever.html">whenever</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">whenever</span><span class="symbol">(</span><span class="identifier" id="com.tylerthrailkill.axon_kotlin.axonframework.test.saga.dsl.SagaTestFixtureBuilder$whenever(kotlin.Function1((com.tylerthrailkill.axon_kotlin.axonframework.test.saga.dsl.SagaTestFixtureBuilder.WheneverBuilder, kotlin.Unit)))/block">block</span><span class="symbol">:</span>&nbsp;<a href="-whenever-builder/index.html"><span class="identifier">WheneverBuilder</span></a><span class="symbol">.</span><span class="symbol">(</span><span class="symbol">)</span>&nbsp;<span class="symbol">-&gt;</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">FixtureExecutionResult</span></code></td>
</tr>
</tbody>
</table>
</BODY>
</HTML>
